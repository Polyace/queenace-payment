<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0"/>
  <title>QueenAce Deposit</title>
  <style>
    body{margin:0;padding:0;font-family:Arial,Helvetica,sans-serif;background:linear-gradient(135deg,#0a0f2c,#1a093f);color:#fff;height:100vh;display:flex;justify-content:center;align-items:center;overflow:hidden}
    .background-dots{position:absolute;width:100%;height:100%;top:0;left:0;z-index:-1;overflow:hidden}
    .dot{position:absolute;width:12px;height:12px;background:#f9d71c;border-radius:50%;animation:float 10s infinite ease-in-out}
    @keyframes float{0%{transform:translateY(0);opacity:.6}50%{transform:translateY(-25px);opacity:1}100%{transform:translateY(0);opacity:.6}}
    .container{background:#1e1e1e;padding:35px 25px;border-radius:18px;width:85%;max-width:360px;text-align:center;margin:0 auto;box-shadow:0 12px 30px rgba(0,0,0,.45),0 4px 8px rgba(0,0,0,.25);backdrop-filter:blur(4px);border:1px solid rgba(255,255,255,.05)}
    .container h1{margin-bottom:20px;color:#FFD700;font-size:1.7em;font-weight:bold}
    input[type="number"]{width:90%;max-width:300px;padding:14px;font-size:16px;margin:10px auto 20px;border:none;border-radius:10px;text-align:center;display:block;box-shadow:inset 0 2px 5px rgba(0,0,0,.2);background:#fff;color:#000}
    button{background:linear-gradient(90deg,#FFD700,#FF9900);border:none;color:#000;font-size:16px;padding:14px;width:90%;max-width:300px;border-radius:10px;cursor:pointer;font-weight:bold;display:block;margin:0 auto;box-shadow:0 6px 15px rgba(255,166,0,.4);transition:transform .15s ease,box-shadow .15s ease}
    button:hover{transform:translateY(-2px);box-shadow:0 8px 20px rgba(255,166,0,.55)}
    .payment-icons{margin-top:20px}
    .payment-icons img{width:38px;margin:0 6px;vertical-align:middle}
    footer{margin-top:18px;font-size:12px;color:#aaa}
  </style>
</head>
<body>
  <div class="background-dots">
    <div class="dot" style="top:10%;left:20%"></div>
    <div class="dot" style="top:40%;left:70%"></div>
    <div class="dot" style="top:80%;left:30%"></div>
    <div class="dot" style="top:60%;left:50%"></div>
    <div class="dot" style="top:20%;left:80%"></div>
  </div>

  <div class="container">
    <h1>ðŸ’³ QueenAce Deposit</h1>
    <input type="number" id="amount" placeholder="Enter Deposit Amount (USD)" min="5" max="1000" />
    <button id="checkout">Proceed to Checkout</button>

    <div class="payment-icons">
      <p>Accepted:</p>
      <img src="https://img.icons8.com/color/48/visa.png" alt="Visa"/>
      <img src="https://img.icons8.com/color/48/mastercard.png" alt="Mastercard"/>
      <img src="https://img.icons8.com/color/48/cash-app.png" alt="Cash App"/>
      <img src="https://img.icons8.com/color/48/google-pay.png" alt="Google Pay"/>
      <img src="https://img.icons8.com/ios-filled/50/apple-pay.png" alt="Apple Pay"/>
    </div>
    <footer>QueenAce Â© 2025 | Secure Payments</footer>
  </div>

  <script>
    // ðŸ”— Your backend lives on Replit
    const API_BASE = "https://queenace.replit.app";

    document.getElementById("checkout").addEventListener("click", async () => {
      const amountUsd = parseFloat(document.getElementById("amount").value);
      if (!Number.isFinite(amountUsd) || amountUsd < 5 || amountUsd > 1000) {
        alert("Please enter an amount between $5 and $1000.");
        return;
      }
      const amount = Math.round(amountUsd * 100); // to cents

      const endpoint = `${API_BASE}/create-checkout-session`;
      console.log("POST â†’", endpoint, { amount });

      try {
        const response = await fetch(endpoint, {
          method: "POST",
          headers: { "Content-Type": "application/json" },
          body: JSON.stringify({ amount })
        });

        // helpful debugging
        const ct = response.headers.get("content-type") || "";
        console.log("Status:", response.status, "CT:", ct);

        if (!response.ok) {
          const text = await response.text();
          throw new Error(`HTTP ${response.status}: ${text}`);
        }

        const data = ct.includes("application/json")
          ? await response.json()
          : JSON.parse(await response.text());

        if (data && data.url) {
          window.location.href = data.url; // should be checkout.polypay.digital/...
        } else {
          throw new Error("Server did not return a checkout URL.");
        }
      } catch (err) {
        alert("Network error: " + (err && err.message ? err.message : err));
        console.error(err);
      }
    });
  </script>
</body>
</html>